from core import esb_send_msg_queue
from esb.esb_data_package import esb_msg_package


class SendIIS:

    def __init__(self, iis_type, iis_son_type):
        self.iis_type = iis_type
        self.iis_son_type = iis_son_type
        self.func = None

    def run_func(self, label):
        self.func(self, label)
        # print('put msg')
        esb_send_msg_queue.put(esb_msg_package.package_analysis_data(self.iis_type, self.iis_son_type, label))

    def __call__(self, func):
        self.func = func
        return self.run_func
