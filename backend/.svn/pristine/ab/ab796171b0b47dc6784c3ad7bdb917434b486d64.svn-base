upstream django_server {
         server 127.0.0.1:8003; # 此处为uwsgi运行的ip地址和端口号
     }

    server {
    listen 80 default_server;
    listen [::]:80 default_server;
    charset utf-8;
    access_log  /etc/nginx/logs/security_platform.access.log  main;
    error_log  /etc/nginx/logs/security_platform.error.log;
    
    location /xadmin {
             include uwsgi_params;
             uwsgi_pass django_server;
         }

    location /static/xadmin {
             access_log off;
             autoindex on;
             expires 30d;
             alias /home/OPS/vas_compile/security/front_end_pc/static/xadmin/;
         }

   location / {
                try_files /_not_exists_ @backend;
        }

   location @backend {
                include uwsgi_params;
                uwsgi_pass django_server;
                uwsgi_send_timeout 1000;
                uwsgi_connect_timeout 1000;
                uwsgi_read_timeout 1000;
                add_header backendIP $upstream_addr;
                proxy_set_header       Host $host;
                proxy_set_header User_Agent $http_user_agent;
                proxy_set_header Http_Referer $http_referer;
                proxy_set_header        X-Real-IP $remote_addr;
                proxy_set_header REMOTE-HOST $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_connect_timeout 1000;
                proxy_send_timeout 1000;
                proxy_read_timeout 1000;
   }
}
